{"ast":null,"code":"import { reactive, computed, onMounted } from 'vue';\nimport axios from \"axios\";\nimport { useField } from \"@/components/hooks/useField\";\nexport function useSubmit(init = {}) {\n  const form = reactive({});\n  const validKey = 'valid';\n  for (const [key, value] of Object.entries(init)) {\n    form[key] = useField(value);\n  }\n  const withoutValid = k => k !== validKey;\n  form[validKey] = computed(() => Object.keys(form).filter(withoutValid).every(k => form[k].valid));\n  return form;\n}\nexport function useFetchSub(init = {}) {\n  const file = this.$refs.file.files[0];\n  onMounted(file);\n  if (file) {\n    const formData = new FormData();\n    formData.append('name', init.name.value);\n    formData.append('email', init.email.value);\n    formData.append('tel', init.tel.value);\n    formData.append('file', init.file.value);\n    axios.post('http://localhost:5000/emailer/file', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    alert('Отправлено');\n  } else {\n    const res = async () => await axios.post('http://localhost:5000/emailer', {\n      name: init.name.value,\n      email: init.email.value,\n      tel: init.tel.value\n    });\n    console.log('ответ сервака', res);\n  }\n}","map":{"version":3,"names":["reactive","computed","onMounted","axios","useField","useSubmit","init","form","validKey","key","value","Object","entries","withoutValid","k","keys","filter","every","valid","useFetchSub","file","$refs","files","formData","FormData","append","name","email","tel","post","headers","alert","res","console","log"],"sources":["C:/Users/ruste/WebstormProjects/camion-express-front/src/components/hooks/useSubmit.js"],"sourcesContent":["import {reactive, computed, onMounted} from 'vue'\r\nimport axios from \"axios\";\r\nimport {useField} from \"@/components/hooks/useField\";\r\n\r\nexport function useSubmit(init = {}){\r\n    const form = reactive({})\r\n    const validKey = 'valid'\r\n\r\n    for(const [key, value] of Object.entries(init)){\r\n        form[key] = useField(value)\r\n    }\r\n\r\n    const withoutValid = k => k !== validKey\r\n\r\n    form[validKey] = computed(() => Object.keys(form).filter(withoutValid).every(k => form[k].valid))\r\n\r\n    return form\r\n}\r\n\r\nexport function useFetchSub(init ={}){\r\n\r\n            const file = this.$refs.file.files[0];\r\n    onMounted(file)\r\n    if(file) {\r\n        const formData = new FormData()\r\n        formData.append('name', init.name.value)\r\n        formData.append('email', init.email.value)\r\n        formData.append('tel', init.tel.value)\r\n        formData.append('file', init.file.value)\r\n\r\n        axios.post('http://localhost:5000/emailer/file', formData, {\r\n            headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        alert('Отправлено')\r\n    }\r\n    else{\r\n        const res = async() => await axios.post('http://localhost:5000/emailer', {\r\n            name: init.name.value,\r\n            email: init.email.value,\r\n            tel: init.tel.value,\r\n        })\r\n        console.log('ответ сервака', res)\r\n    }\r\n\r\n}\r\n\r\n"],"mappings":"AAAA,SAAQA,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,QAAO,KAAK;AACjD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAAQC,QAAQ,QAAO,6BAA6B;AAEpD,OAAO,SAASC,SAASA,CAACC,IAAI,GAAG,CAAC,CAAC,EAAC;EAChC,MAAMC,IAAI,GAAGP,QAAQ,CAAC,CAAC,CAAC,CAAC;EACzB,MAAMQ,QAAQ,GAAG,OAAO;EAExB,KAAI,MAAM,CAACC,GAAG,EAAEC,KAAK,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACN,IAAI,CAAC,EAAC;IAC3CC,IAAI,CAACE,GAAG,CAAC,GAAGL,QAAQ,CAACM,KAAK,CAAC;EAC/B;EAEA,MAAMG,YAAY,GAAGC,CAAC,IAAIA,CAAC,KAAKN,QAAQ;EAExCD,IAAI,CAACC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,MAAMU,MAAM,CAACI,IAAI,CAACR,IAAI,CAAC,CAACS,MAAM,CAACH,YAAY,CAAC,CAACI,KAAK,CAACH,CAAC,IAAIP,IAAI,CAACO,CAAC,CAAC,CAACI,KAAK,CAAC,CAAC;EAEjG,OAAOX,IAAI;AACf;AAEA,OAAO,SAASY,WAAWA,CAACb,IAAI,GAAE,CAAC,CAAC,EAAC;EAEzB,MAAMc,IAAI,GAAG,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC;EAC7CpB,SAAS,CAACkB,IAAI,CAAC;EACf,IAAGA,IAAI,EAAE;IACL,MAAMG,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEnB,IAAI,CAACoB,IAAI,CAAChB,KAAK,CAAC;IACxCa,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEnB,IAAI,CAACqB,KAAK,CAACjB,KAAK,CAAC;IAC1Ca,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAEnB,IAAI,CAACsB,GAAG,CAAClB,KAAK,CAAC;IACtCa,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEnB,IAAI,CAACc,IAAI,CAACV,KAAK,CAAC;IAExCP,KAAK,CAAC0B,IAAI,CAAC,oCAAoC,EAAEN,QAAQ,EAAE;MACvDO,OAAO,EAAE;QAAC,cAAc,EAAE;MAAqB;IACnD,CAAC,CAAC;IACFC,KAAK,CAAC,YAAY,CAAC;EACvB,CAAC,MACG;IACA,MAAMC,GAAG,GAAG,MAAAA,CAAA,KAAW,MAAM7B,KAAK,CAAC0B,IAAI,CAAC,+BAA+B,EAAE;MACrEH,IAAI,EAAEpB,IAAI,CAACoB,IAAI,CAAChB,KAAK;MACrBiB,KAAK,EAAErB,IAAI,CAACqB,KAAK,CAACjB,KAAK;MACvBkB,GAAG,EAAEtB,IAAI,CAACsB,GAAG,CAAClB;IAClB,CAAC,CAAC;IACFuB,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEF,GAAG,CAAC;EACrC;AAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}